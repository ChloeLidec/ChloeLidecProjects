# pylint: disable=missing-function-docstring
"""Fichier tests de la sae1 histoire2foot"""
import histoire2foot

#---------------------------------------------------------------------------------------------
#Exemples de données pour vous aidez à faire des tests
#---------------------------------------------------------------------------------------------

#exemples de matchs de foot
MATCH1 = ('2021-06-28', 'France', 'Switzerland', 3, 3, 'UEFA Euro', 'Bucharest', 'Romania', True)
MATCH2 = ('1998-07-12', 'France', 'Brazil', 3, 0, 'FIFA World Cup', 'Saint-Denis', 'France', False)
MATCH3 = ('1978-04-05', 'Germany', 'Brazil', 0, 1, 'Friendly', 'Hamburg', 'Germany', False)

#exemples de liste de matchs de foot
LISTE1 = [('1970-04-08', 'France', 'Bulgaria', 1, 1, 'Friendly', 'Rouen', 'France', False),
          ('1970-04-28', 'France', 'Romania', 2, 0, 'Friendly', 'Reims', 'France', False),
          ('1970-09-05', 'France', 'Czechoslovakia', 3, 0, 'Friendly', 'Nice', 'France', False),
          ('1970-11-11', 'France', 'Norway', 3, 1, 'UEFA Euro qualification',
           'Lyon', 'France', False)
         ]
LISTE2 = [('1901-03-09', 'England', 'Northern Ireland', 3, 0, 'British Championship',
           'Southampton', 'England', False),
          ('1901-03-18', 'England', 'Wales', 6, 0, 'British Championship',
           'Newcastle', 'England', False),
          ('1901-03-30', 'England', 'Scotland', 2, 2, 'British Championship',
           'London', 'England', False),
          ('1902-05-03', 'England', 'Scotland', 2, 2, 'British Championship',
           'Birmingham', 'England', False),
          ('1903-02-14', 'England', 'Northern Ireland', 4, 0, 'British Championship',
           'Wolverhampton', 'England', False),
          ('1903-03-02', 'England', 'Wales', 2, 1, 'British Championship',
           'Portsmouth', 'England', False),
          ('1903-04-04', 'England', 'Scotland', 1, 2, 'British Championship',
           'Sheffield', 'England', False),
          ('1905-02-25', 'England', 'Northern Ireland', 1, 1, 'British Championship',
           'Middlesbrough', 'England', False),
          ('1905-03-27', 'England', 'Wales', 3, 1, 'British Championship',
           'Liverpool', 'England', False),
          ('1905-04-01', 'England', 'Scotland', 1, 0, 'British Championship',
           'London', 'England', False),
          ('1907-02-16', 'England', 'Northern Ireland', 1, 0, 'British Championship',
           'Liverpool', 'England', False),
          ('1907-03-18', 'England', 'Wales', 1, 1, 'British Championship',
           'London', 'England', False),
          ('1907-04-06', 'England', 'Scotland', 1, 1, 'British Championship',
           'Newcastle', 'England', False),
          ('1909-02-13', 'England', 'Northern Ireland', 4, 0, 'British Championship',
           'Bradford', 'England', False),
          ('1909-03-15', 'England', 'Wales', 2, 0, 'British Championship',
           'Nottingham', 'England', False),
          ('1909-04-03', 'England', 'Scotland', 2, 0, 'British Championship',
           'London', 'England', False)
         ]
LISTE3 = [('1901-03-30', 'Belgium', 'France', 1, 2, 'Friendly', 'Bruxelles',
           'Belgium', False),
          ('1901-03-30', 'England', 'Scotland', 2, 2, 'British Championship',
           'London', 'England', False),
          ('1903-04-04', 'Brazil', 'Argentina', 3, 0, 'Friendly', 'Sao Paulo',
           'Brazil', False),
          ('1903-04-04', 'England', 'Scotland', 1, 2, 'British Championship',
           'Sheffield', 'England', False),
          ('1970-09-05', 'France', 'Czechoslovakia', 3, 0, 'Friendly', 'Nice',
           'France', False),
          ('1970-11-11', 'France', 'Norway', 3, 1, 'UEFA Euro qualification',
           'Lyon', 'France', False)
         ]
LISTE4 = [('1978-03-19', 'Argentina', 'Peru', 2, 1, 'Copa Ramón Castilla',
           'Buenos Aires', 'Argentina', False),
          ('1978-03-29', 'Argentina', 'Bulgaria', 3, 1, 'Friendly',
           'Buenos Aires', 'Argentina', False),
          ('1978-04-05', 'Argentina', 'Romania', 2, 0, 'Friendly', 'Buenos Aires',
           'Argentina', False),
          ('1978-05-03', 'Argentina', 'Uruguay', 3, 0, 'Friendly', 'Buenos Aires',
           'Argentina', False),
          ('1978-06-01', 'Germany', 'Poland', 0, 0, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', True),
          ('1978-06-02', 'Argentina', 'Hungary', 2, 1, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', False),
          ('1978-06-02', 'France', 'Italy', 1, 2, 'FIFA World Cup', 'Mar del Plata',
           'Argentina', True),
          ('1978-06-02', 'Mexico', 'Tunisia', 1, 3, 'FIFA World Cup', 'Rosario',
           'Argentina', True),
          ('1978-06-03', 'Austria', 'Spain', 2, 1, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', True),
          ('1978-06-03', 'Brazil', 'Sweden', 1, 1, 'FIFA World Cup', 'Mar del Plata',
           'Argentina', True),
          ('1978-06-03', 'Iran', 'Netherlands', 0, 3, 'FIFA World Cup', 'Mendoza',
           'Argentina', True),
          ('1978-06-03', 'Peru', 'Scotland', 3, 1, 'FIFA World Cup', 'Córdoba',
           'Argentina', True),
          ('1978-06-06', 'Argentina', 'France', 2, 1, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', False),
          ('1978-06-06', 'Germany', 'Mexico', 6, 0, 'FIFA World Cup', 'Córdoba',
           'Argentina', True),
          ('1978-06-06', 'Hungary', 'Italy', 1, 3, 'FIFA World Cup', 'Mar del Plata',
           'Argentina', True),
          ('1978-06-06', 'Poland', 'Tunisia', 1, 0, 'FIFA World Cup', 'Rosario',
           'Argentina', True),
          ('1978-06-07', 'Austria', 'Sweden', 1, 0, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', True),
          ('1978-06-07', 'Brazil', 'Spain', 0, 0, 'FIFA World Cup', 'Mar del Plata',
           'Argentina', True),
          ('1978-06-07', 'Iran', 'Scotland', 1, 1, 'FIFA World Cup', 'Córdoba',
           'Argentina', True),
          ('1978-06-07', 'Netherlands', 'Peru', 0, 0, 'FIFA World Cup', 'Mendoza',
           'Argentina', True),
          ('1978-06-10', 'Argentina', 'Italy', 0, 1, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', False),
          ('1978-06-10', 'France', 'Hungary', 3, 1, 'FIFA World Cup', 'Mar del Plata',
           'Argentina', True),
          ('1978-06-10', 'Germany', 'Poland', 1, 3, 'FIFA World Cup', 'Rosario',
           'Argentina', True),
          ('1978-06-11', 'Austria', 'Brazil', 0, 1, 'FIFA World Cup', 'Mar del Plata',
           'Argentina', True),
          ('1978-06-11', 'Iran', 'Peru', 1, 4, 'FIFA World Cup', 'Córdoba',
           'Argentina', True),
          ('1978-06-11', 'Netherlands', 'Scotland', 2, 3, 'FIFA World Cup', 'Mendoza',
           'Argentina', True),
          ('1978-06-11', 'Spain', 'Sweden', 1, 0, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', True),
          ('1978-06-14', 'Argentina', 'Poland', 2, 0, 'FIFA World Cup', 'Rosario',
           'Argentina', False),
          ('1978-06-14', 'Austria', 'Netherlands', 1, 5, 'FIFA World Cup', 'Córdoba',
           'Argentina', True),
          ('1978-06-14', 'Brazil', 'Peru', 3, 0, 'FIFA World Cup', 'Mendoza',
           'Argentina', True),
          ('1978-06-14', 'Germany', 'Italy', 0, 0, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', True),
          ('1978-06-18', 'Argentina', 'Brazil', 0, 0, 'FIFA World Cup', 'Rosario',
           'Argentina', False),
          ('1978-06-18', 'Austria', 'Italy', 0, 1, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', True),
          ('1978-06-18', 'Germany', 'Netherlands', 2, 2, 'FIFA World Cup', 'Córdoba',
           'Argentina', True),
          ('1978-06-18', 'Peru', 'Poland', 0, 1, 'FIFA World Cup', 'Mendoza',
           'Argentina', True),
          ('1978-06-21', 'Argentina', 'Peru', 6, 0, 'FIFA World Cup', 'Rosario',
           'Argentina', False),
          ('1978-06-21', 'Austria', 'Germany', 3, 2, 'FIFA World Cup', 'Córdoba',
           'Argentina', True),
          ('1978-06-21', 'Brazil', 'Poland', 3, 1, 'FIFA World Cup', 'Mendoza',
           'Argentina', True),
          ('1978-06-21', 'Italy', 'Netherlands', 1, 2, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', True),
          ('1978-06-24', 'Brazil', 'Italy', 2, 1, 'FIFA World Cup', 'Buenos Aires',
           'Argentina', True),
          ('1978-06-25', 'Argentina', 'Netherlands', 3, 1, 'FIFA World Cup',
           'Buenos Aires', 'Argentina', False)
         ]
#forme tuple:(datematch,pays1, pays2, score1, score2, competition,
#villeaccueil, paysacceuil, terreneutre)
# --------------------------------------------------------------------------------------------------
# listes des fonctions à implémenter
# --------------------------------------------------------------------------------------------------

# Fonctions à implémenter dont les tests sont fournis

def test_equipe_gagnante():
    assert histoire2foot.equipe_gagnante(MATCH1) is None
    assert histoire2foot.equipe_gagnante(MATCH2) == 'France'
    assert histoire2foot.equipe_gagnante(MATCH3) == 'Brazil'
    #pas de traitement du tuple vide dans la fonction

def test_victoire_a_domicile():
    assert not histoire2foot.victoire_a_domicile(MATCH1)
    assert histoire2foot.victoire_a_domicile(MATCH2)
    assert not histoire2foot.victoire_a_domicile(MATCH3)
    #pas de traitement du tuple vide dans la fonction

def test_nb_buts_marques():
    assert histoire2foot.nb_buts_marques(MATCH1) == 6
    assert histoire2foot.nb_buts_marques(MATCH2) == 3
    assert histoire2foot.nb_buts_marques(MATCH3) == 1
    #pas de traitement du tuple vide dans la fonction

def test_matchs_ville():
    assert histoire2foot.matchs_ville(LISTE1, 'Reims') == [('1970-04-28', 'France',
                                                            'Romania', 2, 0, 'Friendly',
                                                            'Reims', 'France', False)
                                                          ]
    assert histoire2foot.matchs_ville(LISTE2, 'Reims') == []
    assert histoire2foot.matchs_ville(LISTE2, 'Liverpool') == [('1905-03-27', 'England',
                                                                'Wales', 3, 1,
                                                                'British Championship', 'Liverpool',
                                                                'England', False),
                                                               ('1907-02-16', 'England',
                                                                'Northern Ireland', 1, 0,
                                                                'British Championship', 'Liverpool',
                                                                'England', False)
                                                              ]
    #pas de traitement du tuple vide dans la fonction

def test_nombre_moyen_buts():
    assert histoire2foot.nombre_moyen_buts([], 'Friendly') is None
    assert histoire2foot.nombre_moyen_buts(LISTE1, 'Friendly') == 7/3
    assert histoire2foot.nombre_moyen_buts(LISTE4, 'FIFA World Cup') == 102/37
    assert histoire2foot.nombre_moyen_buts(LISTE3, 'Friendly') == 3.0

def test_resultats_equipe():
    assert histoire2foot.resultats_equipe(LISTE1, 'France') == (3, 1, 0)
    assert histoire2foot.resultats_equipe([], 'France') == (0, 0, 0)
    assert histoire2foot.resultats_equipe(LISTE1, 'England') == (0, 0, 0)
    assert histoire2foot.resultats_equipe(LISTE2, 'Scotland') == (1, 3, 2)

def test_plus_gros_scores():
    assert histoire2foot.plus_gros_scores(LISTE1) == [('1970-09-05', 'France',
                                                       'Czechoslovakia', 3, 0, 'Friendly',
                                                       'Nice', 'France', False)
                                                     ]
    assert histoire2foot.plus_gros_scores([]) == []
    assert histoire2foot.plus_gros_scores(LISTE2) == [('1901-03-18', 'England', 'Wales',
                                                       6, 0, 'British Championship', 'Newcastle',
                                                       'England', False)
                                                     ]
    assert histoire2foot.plus_gros_scores(LISTE3) == [('1903-04-04', 'Brazil', 'Argentina',
                                                       3, 0, 'Friendly', 'Sao Paulo', 'Brazil',
                                                       False),
                                                      ('1970-09-05', 'France', 'Czechoslovakia',
                                                       3, 0, 'Friendly', 'Nice', 'France', False)
                                                     ]

def test_liste_des_equipes():
    res = histoire2foot.liste_des_equipes(LISTE1)
    res.sort()
    assert res == ['Bulgaria', 'Czechoslovakia', 'France', 'Norway', 'Romania']
    res = histoire2foot.liste_des_equipes(LISTE2)
    res.sort()
    assert res == ['England', 'Northern Ireland', 'Scotland', 'Wales']

def test_premiere_victoire():
    assert histoire2foot.premiere_victoire(LISTE1, "France") == '1970-04-28'
    assert histoire2foot.premiere_victoire(LISTE2, "France") is None
    assert histoire2foot.premiere_victoire(LISTE3, "Belgium") is None
    assert histoire2foot.premiere_victoire([], "France") is None

def test_nb_matchs_sans_defaites():
    assert histoire2foot.nb_matchs_sans_defaites(LISTE1, "France") == 3
    assert histoire2foot.nb_matchs_sans_defaites(LISTE2, "England") == 3
    assert histoire2foot.nb_matchs_sans_defaites([], "France") == 0
    assert histoire2foot.nb_matchs_sans_defaites(LISTE3, "Argentina") == 0
def test_est_bien_trie():
    assert histoire2foot.est_bien_trie(LISTE1)
    assert histoire2foot.est_bien_trie(LISTE2)
    assert not histoire2foot.est_bien_trie([('1901-03-09', 'England', 'Northern Ireland', 3, 0,
                                             'British Championship', 'Southampton', 'England',
                                             False),
                                            ('1901-03-30', 'Belgium', 'France', 1, 2,
                                             'Friendly', 'Bruxelles', 'Belgium', False),
                                            ('1901-03-18', 'England', 'Wales', 6, 0,
                                             'British Championship', 'Newcastle', 'England',
                                             False)
                                           ])
    assert histoire2foot.est_bien_trie([])

def test_fusionner_matchs():
    liste_fus = [('1901-03-09', 'England', 'Northern Ireland', 3, 0,
                  'British Championship', 'Southampton', 'England', False),
                 ('1901-03-18', 'England', 'Wales', 6, 0, 'British Championship',
                  'Newcastle', 'England', False),
                 ('1901-03-30', 'Belgium', 'France', 1, 2, 'Friendly',
                  'Bruxelles', 'Belgium', False),
                 ('1901-03-30', 'England', 'Scotland', 2, 2, 'British Championship',
                  'London', 'England', False),
                 ('1902-05-03', 'England', 'Scotland', 2, 2, 'British Championship',
                  'Birmingham', 'England', False),
                 ('1903-02-14', 'England', 'Northern Ireland', 4, 0, 'British Championship',
                  'Wolverhampton', 'England', False),
                 ('1903-03-02', 'England', 'Wales', 2, 1, 'British Championship',
                  'Portsmouth', 'England', False),
                 ('1903-04-04', 'Brazil', 'Argentina', 3, 0, 'Friendly', 'Sao Paulo',
                  'Brazil', False),
                 ('1903-04-04', 'England', 'Scotland', 1, 2, 'British Championship',
                  'Sheffield', 'England', False),
                 ('1905-02-25', 'England', 'Northern Ireland', 1, 1, 'British Championship',
                  'Middlesbrough', 'England', False),
                 ('1905-03-27', 'England', 'Wales', 3, 1, 'British Championship',
                  'Liverpool', 'England', False),
                 ('1905-04-01', 'England', 'Scotland', 1, 0, 'British Championship',
                  'London', 'England', False),
                 ('1907-02-16', 'England', 'Northern Ireland', 1, 0, 'British Championship',
                  'Liverpool', 'England', False),
                 ('1907-03-18', 'England', 'Wales', 1, 1, 'British Championship',
                  'London', 'England', False),
                 ('1907-04-06', 'England', 'Scotland', 1, 1, 'British Championship',
                  'Newcastle', 'England', False),
                 ('1909-02-13', 'England', 'Northern Ireland', 4, 0, 'British Championship',
                  'Bradford', 'England', False),
                 ('1909-03-15', 'England', 'Wales', 2, 0, 'British Championship',
                  'Nottingham', 'England', False),
                 ('1909-04-03', 'England', 'Scotland', 2, 0, 'British Championship',
                  'London', 'England', False),
                 ('1970-09-05', 'France', 'Czechoslovakia', 3, 0, 'Friendly', 'Nice',
                  'France', False),
                 ('1970-11-11', 'France', 'Norway', 3, 1, 'UEFA Euro qualification',
                  'Lyon', 'France', False)
                ]
    assert histoire2foot.fusionner_matchs(LISTE1, LISTE2) == LISTE2 + LISTE1
    assert histoire2foot.fusionner_matchs([], LISTE3) == LISTE3
    assert histoire2foot.fusionner_matchs(LISTE2, LISTE3) == liste_fus

def test_sauver_charger_matchs():
    assert histoire2foot.charger_matchs("./Sae1/histoire3.csv") == LISTE3
    assert histoire2foot.charger_matchs("./Sae1/histoire2.csv") == LISTE2
    histoire2foot.sauver_matchs(LISTE2, "./Sae1/test2.csv")
    assert histoire2foot.charger_matchs("./Sae1/test2.csv") == LISTE2
    histoire2foot.sauver_matchs(LISTE3, "./Sae1/test3.csv")
    assert histoire2foot.charger_matchs("./Sae1/test3.csv") == LISTE3

def test_plus_de_victoires_que_de_defaites():
    assert histoire2foot.plus_de_victoires_que_defaites(LISTE1, "France")
    assert not histoire2foot.plus_de_victoires_que_defaites(LISTE3, "England")
    assert not histoire2foot.plus_de_victoires_que_defaites(LISTE1, "Portugal")
    assert not histoire2foot.plus_de_victoires_que_defaites([], "Portugal")

def test_matchs_spectaculaires():
    assert histoire2foot.matchs_spectaculaires(LISTE1) == [('1970-11-11',
                                                            'France', 'Norway', 3, 1,
                                                            'UEFA Euro qualification', 'Lyon',
                                                            'France', False)
                                                          ]
    assert histoire2foot.matchs_spectaculaires([]) == []
    assert histoire2foot.matchs_spectaculaires(LISTE2) == [('1901-03-18', 'England',
                                                            'Wales', 6, 0, 'British Championship',
                                                            'Newcastle', 'England', False),
                                                          ]
    assert histoire2foot.matchs_spectaculaires(LISTE3) == [('1901-03-30', 'England',
                                                            'Scotland', 2, 2,
                                                            'British Championship',
                                                            'London', 'England', False),
                                                           ('1970-11-11', 'France', 'Norway',
                                                            3, 1, 'UEFA Euro qualification',
                                                            'Lyon', 'France', False)
                                                          ]
def test_meilleures_equipe():
    assert histoire2foot.meilleures_equipes(LISTE1) == ["France", "Bulgaria"]
    assert histoire2foot.meilleures_equipes(LISTE3) == ["France", "Scotland", "Brazil"]
    assert histoire2foot.meilleures_equipes([]) == []
    assert histoire2foot.meilleures_equipes(LISTE2) == ["England"]
